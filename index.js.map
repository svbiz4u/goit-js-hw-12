{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '46275525-feefee5c0dcabc611e373a7fd';\n\nexport async function fetchData(query, page, perPage) {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        per_page: perPage,\n        page: page,\n        safesearch: true,\n        orientation: 'horizontal',\n      },\n    });\n    return response.data;\n  }","import iziToast from 'izitoast';\n\nexport function renderGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(hit => {\n      return `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${hit.largeImageURL}\" download=false>\n                <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" class=\"gallery-img\" width=360 onclick=\"return false\" data-source=\"${hit.largeImageURL}\">\n                <ul class=\"description\">\n                    <li>\n                        <p>Likes</p>\n                        <p class=\"description-value\">${hit.likes}</p>\n                    </li>\n                    <li>\n                        <p>Views</p>\n                        <p class=\"description-value\">${hit.views}</p>\n                    </li>\n                    <li>\n                        <p>Comments</p>\n                        <p class=\"description-value\">${hit.comments}</p>\n                    </li>\n                    <li>\n                        <p>Downloads</p>\n                        <p class=\"description-value\">${hit.downloads}</p>\n                    </li>\n                </ul>\n            </a>\n        </li>\n        `;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function showMessage(message) {\n  iziToast.show({ message });\n}\n\nexport function showLoader() {\n  document.querySelector('.loader').classList.remove('visually-hidden');\n}\n\nexport function hideLoader() {\n  document.querySelector('.loader').classList.add('visually-hidden');\n}","import iziToast from \"izitoast\"; // Описаний у документації\nimport \"izitoast/dist/css/iziToast.min.css\"; // Додатковий імпорт стилів\nimport SimpleLightbox from \"simplelightbox\";// Описаний у документації\nimport \"simplelightbox/dist/simple-lightbox.min.css\"; // Додатковий імпорт стилів\n\nimport { fetchData } from './js/pixabay-api';\nimport {\n  renderGallery,\n  showMessage,\n  showLoader,\n  hideLoader,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst queryInput = document.querySelector('input[name=\"query\"]');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\niziToast.settings({\n  messageColor: '#fafafb',\n  position: 'topRight',\n  backgroundColor: '#ef4040',\n  iconColor: '#fafafb',\n  close: false,\n});\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\nlet query = '';\nlet page = 1;\nconst perPage = 15;\nlet images;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = queryInput.value.trim();\n  if (query === '') {\n    showMessage('Please enter a search query.');\n    return;\n  }\n  loadMoreBtn.classList.add('visually-hidden');\n  gallery.innerHTML = '';\n  page = 1;\n\n  showLoader();\n\n  try {\n    images = await fetchData(query, page, perPage);\n    if (images.hits.length === 0) {\n      showMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      hideLoader();\n      console.log(\n        '🚀 ~ form.addEventListener ~ images.hits.length:',\n        images.hits.length\n      );\n      return;\n    }\n\n    if (images.hits.length < 15) {\n      loadMoreBtn.classList.add('visually-hidden');\n    } else {\n      loadMoreBtn.classList.remove('visually-hidden');\n    }\n    renderGallery(images.hits);\n    lightbox.refresh();\n  } \n  catch (error) {\n    // console.log(error);\n      iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight'\n      });\n    \n\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n  try {\n    loadMoreBtn.classList.add('visually-hidden');\n    showLoader();\n\n    images = await fetchData(query, page, perPage);\n    renderGallery(images.hits);\n    lightbox.refresh();\n\n    const galleryCard = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect();\n    const cardHeight = galleryCard.height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (images.total <= Math.ceil(page * perPage)) {\n      loadMoreBtn.classList.add('visually-hidden');\n      showMessage(\"We're sorry, but you've reached the end of search results.\");\n      return;\n    }\n    loadMoreBtn.classList.remove('visually-hidden');\n  } catch (error) {\n    // console.log(error);\n     iziToast.error({\n     title: 'Error',\n     message: error.message,\n     position: 'topRight'\n     });\n  } finally {\n    hideLoader();\n  }\n});"],"names":["BASE_URL","API_KEY","fetchData","query","page","perPage","axios","renderGallery","images","gallery","markup","hit","showMessage","message","iziToast","showLoader","hideLoader","form","queryInput","loadMoreBtn","lightbox","SimpleLightbox","event","error","cardHeight"],"mappings":"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"}